/* -------------------------------------------------------------------------- */
/*                        Generated content CSS                               */
/* -------------------------------------------------------------------------- */

/* Insert generated content at start of volume */
@volume {
        @begin {
                content: flow(front) flow(volume-toc);
        }
}
@volume :first {
        @begin {
                content: flow(front) flow(front-first) flow(document-toc);
        }
}

/* this elements is generated by insert-boilerplate.xsl
 * it is inserted in the frontmatter (first body) before the first level1 (section) */
.pef-titlepage {
        flow: front;
        display: block;
        volume-break-after: avoid;
        text-transform: uncontracted;
        margin-top: 0;
        margin-left: 1;
        margin-right: 1;
        hyphens: none;
        
        & > p {
            margin-top: 0;
            margin-bottom: 0;
            text-indent: 0;
            text-align: center;
        }
}

.pef-volume {
        &::before {
                content: "Hefte " -obfl-evaluate("(round $volume)");
        }
        
        &::after {
                content: -obfl-evaluate("(round $volumes)");
        }
}

/* #generated-*-toc is a <list> in DTBook and <ol> in HTML
 * these elements are generated by px:dtbook-to-pef.convert */
#generated-volume-toc, #generated-document-toc {
        // flow: volume-toc; // default for #generated-volume-toc
        // flow: document-toc; // default for #generated-document-toc
        volume-break-after: avoid;
        page-break-before: always;
        margin-left: 0; // no left margin on toc lists
        
        &::-obfl-on-toc-start {
            content: 'Innhold';
            display: block;
            border-bottom: ⠉;
            border-left: none;
            border-right: none;
            border-top: ⠉;
            margin-bottom: 1;
            margin-left: 0;
            margin-right: 0;
            margin-top: 2;
            text-align: center;
        }
        
        li {
                display: block;
                margin-left: 2;
                margin-right: 3;
                margin-top: 0;
                text-indent: -2;
                
                & a::after {
                        content: " " leader("⠄", $page-width - if($show-print-page-numbers, 2, 1) - 1, right) " " target-counter(attr(href), page);
                        margin-left: 2;
                        margin-top: 0;
                        text-indent: -2;
                        // otherwise the spaces to the left and right of the leader are collapsed into one
                        // because Dotify passes the leader to the translator as an empty string
                        white-space: pre-wrap;
                }
        }
}

/* these elements are generated by insert-boilerplate.xsl
 * they are inserted after .pef-titlepage
 * there can be multiple .pef-about elements; the first one is a level1 (body) and starts with a h1
 */
.pef-about {
        
        // can not be put in the normal flow because of how the .notes-placement and .notes-placement-fallback
        // fields are currently implemented
        flow: front-first;
        volume-break-after: avoid;
}


/* Page count */
.pef-pages {
        display: inline;
}
.pef-pages::after {
        display: inline;
        @if $duplex {
                content: -obfl-evaluate("(round (* $sheets-in-document 2))");
        } @else {
                content: -obfl-evaluate("(round $sheets-in-document)");
        }
}
